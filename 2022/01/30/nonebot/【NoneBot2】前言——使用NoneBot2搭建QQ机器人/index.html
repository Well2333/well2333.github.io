<!DOCTYPE html>
<html lang="zh-CN">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  <link rel="icon" href="/images/avatar.webp">
  <title>【NoneBot2】前言——使用NoneBot2搭建QQ机器人 | Well404的妙妙屋</title>
  <meta name="author" content="Well404" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="NoneBot2" />
  
  <meta name="description" content="什么是nonebot？关于NoneBot2，我们先来引用一下官方文档的描述  NoneBot2 是一个可扩展的 Python 异步机器人框架，它会对机器人收到的事件进行解析和处理，并以插件化的形式，按优先级分发给事件所对应的事件响应器，来完成具体的功能。除了起到解析事件的作用，NoneBot 还为插件提供了大量实用的预设操作和权限控制机制。对于命令处理，它更是提供了完善且易用的会话机制和内部调用机">
<meta property="og:type" content="article">
<meta property="og:title" content="【NoneBot2】前言——使用NoneBot2搭建QQ机器人">
<meta property="og:url" content="http://blog.well404.top/2022/01/30/nonebot/%E3%80%90NoneBot2%E3%80%91%E5%89%8D%E8%A8%80%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8NoneBot2%E6%90%AD%E5%BB%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/index.html">
<meta property="og:site_name" content="Well404的妙妙屋">
<meta property="og:description" content="什么是nonebot？关于NoneBot2，我们先来引用一下官方文档的描述  NoneBot2 是一个可扩展的 Python 异步机器人框架，它会对机器人收到的事件进行解析和处理，并以插件化的形式，按优先级分发给事件所对应的事件响应器，来完成具体的功能。除了起到解析事件的作用，NoneBot 还为插件提供了大量实用的预设操作和权限控制机制。对于命令处理，它更是提供了完善且易用的会话机制和内部调用机">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://blog.well404.top/2022/01/30/nonebot/%E3%80%90NoneBot2%E3%80%91%E5%89%8D%E8%A8%80%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8NoneBot2%E6%90%AD%E5%BB%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/images/nonebot_noob/logo.webp">
<meta property="article:published_time" content="2022-01-30T15:59:07.000Z">
<meta property="article:modified_time" content="2022-02-13T19:39:09.658Z">
<meta property="article:author" content="Well404">
<meta property="article:tag" content="NoneBot2">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.well404.top/2022/01/30/nonebot/%E3%80%90NoneBot2%E3%80%91%E5%89%8D%E8%A8%80%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8NoneBot2%E6%90%AD%E5%BB%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/images/nonebot_noob/logo.webp">
<meta name="twitter:site" content="@null">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" type="text/css" media="all">
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" type="text/css" media="all">
  
  
  <link rel="stylesheet" id="fontawe-css" href="https://unpkg.com/font-awesome@4.7.0/css/font-awesome.min.css" type="text/css" media="all">
  <link rel="stylesheet" id="nprogress-css" href="https://unpkg.com/nprogress@0.2.0/nprogress.css" type="text/css" media="all">
  
  
  
    <link rel="stylesheet" href="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-dark.min.css" type="text/css" media="all">
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="https://unpkg.com/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner.webp');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('/images/bg.webp');
        }
      }
    
  </style>
  
<meta name="generator" content="Hexo 5.4.1"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                        <li><a href="/"><i class="fa fa-home"></i>首页</a></li>
                                    
                                
                                    
                                        <li><a href="/archives/"><i class="fa fa-file"></i>档案馆</a></li>
                                    
                                
                                    
                                        <li><a href="/friends/"><i class="fa fa-paw"></i>好伙伴</a></li>
                                    
                                
                                    
                                        <li>
                                            <a><i class="fa fa-link"></i>链接</a>
                                            <ul class="sub-menu">
                                                
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://candinya.com">博客主题の作者</a></li>
                                                    
                                                
                                                    
                                                        <li><a target="_blank" rel="noopener" href="https://github.com/Candinya/Kratos-Rebirth">博客主题の项目</a></li>
                                                    
                                                
                                            </ul>
                                        </li>
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">Well404的妙妙屋</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>Well404的妙妙屋</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article>
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center">【NoneBot2】前言——使用NoneBot2搭建QQ机器人</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><i class="fa fa-calendar"></i> 2022-01-30</li>
                <li><i class="fa fa-user"></i> 作者 Well404</li>
                <li>
                    <i class="fa fa-edit"></i> 
                    
                    
                        ~3.95K
                    
                    字
                </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                本文最后编辑于 <time datetime="1644781149658"></time> 前，其中的内容可能需要更新。
            </div>
            
                <div class="kratos-post-inner-toc">
                    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFnonebot%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">什么是nonebot？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%86%B3%E5%BF%83%E6%83%B3%E8%A6%81%E5%BC%80%E5%A7%8Bnonebot%E4%B9%8B%E6%97%85%EF%BC%8C%E5%85%88%E8%AE%A9%E6%88%91%E7%BB%99%E4%BD%A0%E6%B3%BC%E7%9B%86%E5%86%B7%E6%B0%B4"><span class="toc-number">2.</span> <span class="toc-text">如果你决心想要开始nonebot之旅，先让我给你泼盆冷水</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84-python-%E5%9F%BA%E7%A1%80%E4%BB%A5%E5%8F%8A%E8%B6%B3%E5%A4%9F%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C%E3%80%82"><span class="toc-number">2.0.0.0.1.</span> <span class="toc-text">有足够的 python 基础以及足够的计算机操作系统的使用经验。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84%E8%80%90%E5%BF%83"><span class="toc-number">2.0.0.0.2.</span> <span class="toc-text">有足够的耐心</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84%E5%BF%83%E6%80%81"><span class="toc-number">2.0.0.0.3.</span> <span class="toc-text">有足够的心态</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%B9%B6%E6%B2%A1%E6%9C%89%E8%A2%AB%E5%89%8D%E6%96%B9%E7%9A%84%E8%89%B0%E9%9A%BE%E9%99%A9%E9%98%BB%E5%8A%9D%E9%80%80%E7%9A%84%E8%AF%9D%EF%BC%8C%E6%AC%A2%E8%BF%8E%E4%BD%A0%E5%8A%A0%E5%85%A5nonebot%E5%A4%A7%E5%AE%B6%E5%BA%AD"><span class="toc-number">3.</span> <span class="toc-text">如果你并没有被前方的艰难险阻劝退的话，欢迎你加入nonebot大家庭</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AE%A1%E5%88%92"><span class="toc-number">4.</span> <span class="toc-text">更新计划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80%EF%BC%88%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">引言（基础知识）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%81%E5%90%8E%E7%AB%AF"><span class="toc-number">5.1.</span> <span class="toc-text">初步认识前端、后端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebSocket"><span class="toc-number">5.2.</span> <span class="toc-text">WebSocket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OneBot%E6%A0%87%E5%87%86"><span class="toc-number">5.3.</span> <span class="toc-text">OneBot标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E8%B7%AF%E5%BE%84%EF%BC%88Working-Directory%EF%BC%89%E3%80%81%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-number">5.4.</span> <span class="toc-text">工作路径（Working Directory）、相对路径与绝对路径</span></a></li></ol></li></ol>
                </div>
            
            <hr />
            <h2 id="什么是nonebot？"><a href="#什么是nonebot？" class="headerlink" title="什么是nonebot？"></a>什么是nonebot？</h2><p>关于NoneBot2，我们先来引用一下<a target="_blank" rel="noopener" href="https://v2.nonebot.dev/">官方文档</a>的描述</p>
<blockquote>
<p>NoneBot2 是一个可扩展的 Python 异步机器人框架，它会对机器人收到的事件进行解析和处理，并以插件化的形式，按优先级分发给事件所对应的事件响应器，来完成具体的功能。<br>除了起到解析事件的作用，NoneBot 还为插件提供了大量实用的预设操作和权限控制机制。对于命令处理，它更是提供了完善且易用的会话机制和内部调用机制，以分别适应命令的连续交互和插件内部功能复用等需求。</p>
<p>得益于 Python 的 asyncio (opens new window)机制，NoneBot 处理事件的吞吐量有了很大的保障，再配合 WebSocket 通信方式（也是最建议的通信方式），NoneBot 的性能可以达到 HTTP 通信方式的两倍以上，相较于传统同步 I/O 的 HTTP 通信，更是有质的飞跃。</p>
<p>需要注意的是，NoneBot 仅支持 Python 3.7+ ，个人推荐的开发版本是3.8.10</p>
</blockquote>
<p>看起来晦涩难懂？其实要点主要有以下几个：</p>
<ol>
<li>Nonebot2是基于python3.7及以上运行的</li>
<li>框架整体基于异步io</li>
<li>有完善的预设指令，可减轻开发者的工作强度</li>
</ol>
<p>看到这里，你可能会大呼过瘾。如此优秀的框架已经迫不及待的想要使用了呢！<br>且慢且慢，请先随我一起进行学习，慢慢上手。</p>
<h2 id="如果你决心想要开始nonebot之旅，先让我给你泼盆冷水"><a href="#如果你决心想要开始nonebot之旅，先让我给你泼盆冷水" class="headerlink" title="如果你决心想要开始nonebot之旅，先让我给你泼盆冷水"></a>如果你决心想要开始nonebot之旅，先让我给你泼盆冷水</h2><p>目前，QQ机器人社区处在一个十分艰难的状态下，一是由于腾讯的打压导致QQ机器人无法正常的工作，二是由于缺少足量的开发者和足够易用的工具（轮子），导致新手入门极为困难，因此如果你决定想要加入nonebot大家庭，那么你首先应该做到以下几点：</p>
<h6 id="有足够的-python-基础以及足够的计算机操作系统的使用经验。"><a href="#有足够的-python-基础以及足够的计算机操作系统的使用经验。" class="headerlink" title="有足够的 python 基础以及足够的计算机操作系统的使用经验。"></a>有足够的 python 基础以及足够的计算机操作系统的使用经验。</h6><p>计算机使用经验这一点我无法详细说明，由于每个人的情况均有所不同，所以我也无法很好的给出结论，但只会打游戏，其他多一点（如文件格式、路径）都不会还不肯学的的是完全不行的。<br>python 基础方面，由于nonebot是基于asycnio的异步事件处理框架，使用难度上来说，某种程度上甚至高于一些简单的机器学习框架，而一般非专业和部分专业的大学学习的 python 课程是无法达到这个标准的，更别说零基础了。所以在玩转nonebot之前，将会有漫长的学习过程。</p>
<h6 id="有足够的耐心"><a href="#有足够的耐心" class="headerlink" title="有足够的耐心"></a>有足够的耐心</h6><p>上文也说了，由于开发者较少，nonebot是没有足够的拿来即用的软件生态的（或者说，现在整个机器人社区都是半死不活的状态），因此一些特殊需求很有可能需要你自己动手编写插件才能够实现，这也意味着使用成本的上升。</p>
<h6 id="有足够的心态"><a href="#有足够的心态" class="headerlink" title="有足够的心态"></a>有足够的心态</h6><p>由于腾讯为了强推自家的机器人，和使用QQ机器人的黑灰产产业猖獗，导致腾讯对于野生机器人采取一棍子打死的态度，现在不光如此，甚至还想来踩上两脚。因此，你在使用机器人的时候说不定什么时候就会被 “风控” ，导致你的机器人发不出任何话，图片和其他炫酷的功能，甚至会导致你的账号冻结。因此，如果你要长期维护一个机器人，这是无法避免的问题。</p>
<h2 id="如果你并没有被前方的艰难险阻劝退的话，欢迎你加入nonebot大家庭"><a href="#如果你并没有被前方的艰难险阻劝退的话，欢迎你加入nonebot大家庭" class="headerlink" title="如果你并没有被前方的艰难险阻劝退的话，欢迎你加入nonebot大家庭"></a>如果你并没有被前方的艰难险阻劝退的话，欢迎你加入nonebot大家庭</h2><p>对于这个系列教程，我会尽我最大的努力，讲晦涩难懂的知识拆分，用尽量简单的方法教会大家如果使用这个项目。</p>
<h2 id="更新计划"><a href="#更新计划" class="headerlink" title="更新计划"></a>更新计划</h2><p>视频部分：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1aZ4y1f7e2">【零基础搭建QQ机器人】开源、免费、纯新手向的nonebot2.0.0beta版讲解</a><br>讲解一些环境配置、部署以及其他不适合使用文字表达的部分，作为纯新手入门以及文字部分的补充。</p>
<p>第一章：Hello World——初识NoneBot2</p>
<blockquote>
<p>在本章节，你将学会安装并配置你的第一个QQ机器人实例，并且可以掌握一些部署阶段常见的bug的特征以及解决方法，与视频部分相互补充。</p>
</blockquote>
<p>第二章：哈？你说啥？——基础插件编写指南</p>
<blockquote>
<p>在本章节，你将学会编写最基本的文字和图片的交互的插件。</p>
</blockquote>
<p>第三章：在？来张setu？——进阶插件编写指南</p>
<blockquote>
<p>在本章节，你将学会使机器人能够响应更多的事件，发送更多种类的信息，以及插件间通信、定时任务框架等。</p>
</blockquote>
<p>第四章：你认真读README了吗？——常用API总结</p>
<blockquote>
<p>在本章节，我将梳理nonebot及gocqhttp的常用api，并附上实例。</p>
</blockquote>
<h2 id="引言（基础知识）"><a href="#引言（基础知识）" class="headerlink" title="引言（基础知识）"></a>引言（基础知识）</h2><p>在正式开始教程之前，我想对以下几个概念进行说明：</p>
<h3 id="初步认识前端、后端"><a href="#初步认识前端、后端" class="headerlink" title="初步认识前端、后端"></a>初步认识前端、后端</h3><p>我们先思考一下，如果让你去实现一个QQ机器人，我们需要什么样的程序？<br>如果你现在没有头绪，我们不妨先去看一下这个例子</p>
<ol>
<li>顾客去饭店点了一份鱼香肉丝</li>
<li>服务员将你点鱼香肉丝的这件事汇报给后厨</li>
<li>后厨的厨师炒出了鱼香肉丝</li>
<li>服务员从后厨取出了鱼香肉丝</li>
<li>服务员把鱼香肉丝交给顾客</li>
</ol>
<p>在这个过程中，顾客所接触到的人只有服务员，但服务员本身并不进行炒菜的工作，而厨师又始终不知道具体是谁哪位顾客了什么菜，那么这份菜究竟是怎么交付到这位顾客的手中的呢？</p>
<p>我们再回顾一下第二条与第四条，这两条中服务员与厨师进行了“交互”，通过这种方式将厨师所需要的信息进行了传递。并且将厨师处理完毕的菜交到顾客的手中。</p>
<p>这种结构最大的优点是高度的可替代性和稳定性，例如今天厨师A生病了就可以换用厨师B，服务员Ｃ的老婆生孩子了就可以让服务员D多干一些。而不会出现因为某个环节的部分功能缺失导致全盘崩溃。</p>
<p>我们将目光放回到QQ机器人上，用上述的思路重新进行思考，把顾客、服务员与厨师替换成腾讯的服务器、前端、后端。</p>
<ol>
<li>前端从腾讯的服务器上接收用户的信息（或其他）</li>
<li>将信息传递给后端</li>
<li>后端对信息进行分析，调用对应的模块进行处理</li>
<li>后端将处理结果推送给前端</li>
<li>前端将处理后的结果重新发送给腾讯的服务器（或其他）</li>
</ol>
<p>怎么样，是不是一目了然了呢？</p>
<p>在本篇教程中，我们使用的的前端是<a target="_blank" rel="noopener" href="https://docs.go-cqhttp.org/">go-cqhttp</a>，后端是<a target="_blank" rel="noopener" href="https://v2.nonebot.dev/">NoneBot2</a>，他们将很很好的完成上述的工作。</p>
<h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><blockquote>
<p>WebSocket是一种在单个TCP连接上进行全双工通信的协议。WebSocket使得客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据。在WebSocket API中，浏览器和服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输。</p>
</blockquote>
<p>在go-cqhttp与NoneBot的信息交互中，我们使用的就是反向WebSocket连接，也就是说go-cqhttp会主动去寻找nonebot2的程序，并将消息通过ws推送给nonebot2，因此相对于传统的HTTP连接，这种方法明显效率更高，延迟更低。</p>
<h3 id="OneBot标准"><a href="#OneBot标准" class="headerlink" title="OneBot标准"></a>OneBot标准</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/howmanybots/onebot/">OneBot标准</a>是一个聊天机器人应用接口标准，旨在统一不同聊天平台上的机器人应用开发接口，使开发者只需编写一次代码即可应用到多种机器人平台。</p>
</blockquote>
<p>在go-cqhttp与NoneBot的信息交互中，通讯的内容是基于OneBot的标准的改版，具体可以参考<a target="_blank" rel="noopener" href="https://docs.go-cqhttp.org/">go-cqhttp的文档</a>。</p>
<p>我们先回顾一下前文中的饭店。<br>如果这个饭店是一个法餐馆，服务生是中国人而厨师是法国人，二者语言并不互通，那么还能够完成点餐的任务吗？<br>明显不能，所以我们会人为要求服务生与厨师都用同一种语言进行交流，而这种语言标准就可以帮助二者有效的沟通。</p>
<p>在两个程序的沟通中，我们需要二者能够识别对方的信息，而不同的开发者不一定会使用一样的交流方式。因此随着OneBot标准的诞生，开发者可以使用这个标准的规范化的语言，那么语言不通的问题就迎刃而解了。</p>
<h3 id="工作路径（Working-Directory）、相对路径与绝对路径"><a href="#工作路径（Working-Directory）、相对路径与绝对路径" class="headerlink" title="工作路径（Working Directory）、相对路径与绝对路径"></a>工作路径（Working Directory）、相对路径与绝对路径</h3><blockquote>
<p>The directory in which you are currently working. Path names that do not start with the root directory are assumed by the operating system to start from the working directory<br>————该解释出自 <a target="_blank" rel="noopener" href="https://www.webopedia.com/definitions/working-directory/">Webopedia</a></p>
</blockquote>
<p>简单来说，工作路径是相当于一个锚点，作为 <strong>相对路径</strong> 寻找文件的出发点。就类似于你去给别人指路（问路），一般来说会从你<strong>现在</strong>的位置作为起点进行寻路，那么这个就叫做相对路径。同理，如果<strong>现在</strong>的位置发生了改变，那么按照相同的路径来寻路自然到不了想要的目的地。</p>
<p>而 <strong>绝对路径</strong> 则不会受到该问题的影响，类似于从一个<strong>固定的建筑</strong>指路到<strong>目标地</strong> ，那么只要目标地<strong>不发生改变</strong>，路线自然不会因为你<strong>现在</strong>的位置不同而出现改变。</p>
<p>那么，绝对路径就比相对路径好？</p>
<p>答案是否定的。我们不难看出，绝对路径会要求目标地点<strong>不能发生改变</strong>，而在任意一个操作系统里面，复制和转移文件都是家常便饭的操作，因此，绝对路径的基本要求很难被满足，因此基本上只会出现在一些特殊场合和自己写的简易的脚本上，而无法应对任何位置的改变。</p>
<p>相反，相对路径如果能保证<strong>起始位置</strong>的准确，是能够在这个整体里面路径的准确的，类似于一个规划图完全相同的游乐园里面，摩天轮的位置相对过山车的位置始终一致，而无论这座游乐园实在北京还是上海。相对于现实中建筑物需要因地制宜进行规划，计算机中一个程序的复制和传播的成本几乎不费吹灰之力，那么相同结构的程序为了能在不同计算机上进行工作，甚至是不同操作系统上进行工作，是绝对无法离开相对路径来维持其内部程序和文件之间的联系的。</p>
<p>那么，这个如此重要的<strong>起始位置</strong>，就是工作路径。程序会依据<strong>起始位置</strong>来进行搜索所需要的文件，那么如果起始位置跑了，自然也无法搜索到想要的程序了。</p>
<p>在nonebot中，工作路径位于<strong>bot.py的根目录</strong>。</p>
<p>在第一节中，我们会了解到vscode如何人为指定工作路径，或通过python自身来修正工作路径。</p>

        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5>本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "http://blog.well404.top/2022/01/30/nonebot/%E3%80%90NoneBot2%E3%80%91%E5%89%8D%E8%A8%80%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8NoneBot2%E6%90%AD%E5%BB%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "http://blog.well404.top/2022/01/30/nonebot/%E3%80%90NoneBot2%E3%80%91%E5%89%8D%E8%A8%80%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8NoneBot2%E6%90%AD%E5%BB%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/";
            const title         = "「【NoneBot2】前言——使用NoneBot2搭建QQ机器人」";
            const excerpt       = `什么是nonebot？关于NoneBot2，我们先来引用一下官方文档的描述

NoneBot2 是一个可扩展的 Python 异步机器人框架，它会对机器人收到的事件进行解析和处理，并以插件化的形式，按优先级分发给事件所对应的事件响应器...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    <a class="tag-none-link" href="/tags/NoneBot2/" rel="tag">NoneBot2</a>
                </div>
                <div class="pull-date">
                <span>最后编辑：2022-02-14</span>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" 关于我" href="/1970/01/01/hello-world/">&lt; 上一篇</a>
            </div>
            
            
            <div class="nav-next clearfix">
                <a title=" 【NoneBot2】第一章：安装并配置你的机器人及常见报错的解决方法" href="/2022/02/02/nonebot/【NoneBot2】第一章：安装并配置你的机器人及常见报错的解决方法/">下一篇 &gt;</a>
            </div>
            
        </nav>
    
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                    <aside id="krw-toc" class="widget widget-kratos-toc clearfix">
    <div class="photo-background"></div>
    <h4 class="widget-title no-after">
        <i class="fa fa-compass"></i>
        文章目录
        <span class="toc-progress-bar"></span>
    </h4>
    <div class="textwidget">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFnonebot%EF%BC%9F"><span class="toc-text">什么是nonebot？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%86%B3%E5%BF%83%E6%83%B3%E8%A6%81%E5%BC%80%E5%A7%8Bnonebot%E4%B9%8B%E6%97%85%EF%BC%8C%E5%85%88%E8%AE%A9%E6%88%91%E7%BB%99%E4%BD%A0%E6%B3%BC%E7%9B%86%E5%86%B7%E6%B0%B4"><span class="toc-text">如果你决心想要开始nonebot之旅，先让我给你泼盆冷水</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84-python-%E5%9F%BA%E7%A1%80%E4%BB%A5%E5%8F%8A%E8%B6%B3%E5%A4%9F%E7%9A%84%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E4%BD%BF%E7%94%A8%E7%BB%8F%E9%AA%8C%E3%80%82"><span class="toc-text">有足够的 python 基础以及足够的计算机操作系统的使用经验。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84%E8%80%90%E5%BF%83"><span class="toc-text">有足够的耐心</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9C%89%E8%B6%B3%E5%A4%9F%E7%9A%84%E5%BF%83%E6%80%81"><span class="toc-text">有足够的心态</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E4%BD%A0%E5%B9%B6%E6%B2%A1%E6%9C%89%E8%A2%AB%E5%89%8D%E6%96%B9%E7%9A%84%E8%89%B0%E9%9A%BE%E9%99%A9%E9%98%BB%E5%8A%9D%E9%80%80%E7%9A%84%E8%AF%9D%EF%BC%8C%E6%AC%A2%E8%BF%8E%E4%BD%A0%E5%8A%A0%E5%85%A5nonebot%E5%A4%A7%E5%AE%B6%E5%BA%AD"><span class="toc-text">如果你并没有被前方的艰难险阻劝退的话，欢迎你加入nonebot大家庭</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E8%AE%A1%E5%88%92"><span class="toc-text">更新计划</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%95%E8%A8%80%EF%BC%88%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%EF%BC%89"><span class="toc-text">引言（基础知识）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86%E5%89%8D%E7%AB%AF%E3%80%81%E5%90%8E%E7%AB%AF"><span class="toc-text">初步认识前端、后端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WebSocket"><span class="toc-text">WebSocket</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OneBot%E6%A0%87%E5%87%86"><span class="toc-text">OneBot标准</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E8%B7%AF%E5%BE%84%EF%BC%88Working-Directory%EF%BC%89%E3%80%81%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E4%B8%8E%E7%BB%9D%E5%AF%B9%E8%B7%AF%E5%BE%84"><span class="toc-text">工作路径（Working Directory）、相对路径与绝对路径</span></a></li></ol></li></ol>
    </div>
</aside>
                
                
  <aside id="krw-categories" class="widget widget-kratos-categories clearfix">
    <h4 class="widget-title"><i class="fa fa-folder"></i>分类目录</h4>
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/NoneBot2%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8B/">NoneBot2系列教程</a><span class="category-list-count">4</span></li></ul>
  </aside>


            
                
  <aside id="krw-tags" class="widget widget-kratos-tags clearfix">
    <h4 class="widget-title"><i class="fa fa-tags"></i>标签聚合</h4>
      <div class="tag-clouds">
        <a href="/tags/NoneBot2/" style="font-size: 0.6em;">NoneBot2</a>
      </div>
  </aside>

            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2022/02/11/nonebot/%E3%80%90NoneBot2%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E5%9F%BA%E7%A1%80%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97%E7%AC%AC%E4%BA%8C%E8%8A%82%E2%80%94%E2%80%94%E2%80%94%E5%90%AC%E5%BE%97%E8%A7%81%EF%BC%8C%E8%AF%B4%E5%BE%97%E5%87%BA.md/"><i class="fa  fa-book"></i> 【NoneBot2】第二章：基础插件编写指南第二节———听得见，说得出</a>
            
          
        
          
          
            <a class="list-group-item" href="/2022/02/11/nonebot/%E3%80%90NoneBot2%E3%80%91%E7%AC%AC%E4%BA%8C%E7%AB%A0%EF%BC%9A%E5%9F%BA%E7%A1%80%E6%8F%92%E4%BB%B6%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97%E7%AC%AC%E4%B8%80%E8%8A%82%E2%80%94%E2%80%94%E2%80%94%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/"><i class="fa  fa-book"></i> 【NoneBot2】第二章：基础插件编写指南第一节———前置知识</a>
            
          
        
          
          
            <a class="list-group-item" href="/2022/02/02/nonebot/%E3%80%90NoneBot2%E3%80%91%E7%AC%AC%E4%B8%80%E7%AB%A0%EF%BC%9A%E5%AE%89%E8%A3%85%E5%B9%B6%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%8F%8A%E5%B8%B8%E8%A7%81%E6%8A%A5%E9%94%99%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"><i class="fa  fa-book"></i> 【NoneBot2】第一章：安装并配置你的机器人及常见报错的解决方法</a>
            
          
        
          
          
            <a class="list-group-item" href="/2022/01/30/nonebot/%E3%80%90NoneBot2%E3%80%91%E5%89%8D%E8%A8%80%E2%80%94%E2%80%94%E4%BD%BF%E7%94%A8NoneBot2%E6%90%AD%E5%BB%BAQQ%E6%9C%BA%E5%99%A8%E4%BA%BA/"><i class="fa  fa-book"></i> 【NoneBot2】前言——使用NoneBot2搭建QQ机器人</a>
            
          
        
          
          
            <a class="list-group-item" href="/1970/01/01/hello-world/"><i class="fa  fa-book"></i> 关于我</a>
            
          
        
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        
                        <li><a href="mailto:well_404@outlook.com"><i class="fa fa-envelope"></i></a></li>
                        
                        
                        
                        
                        
                        <li><a target="_blank" rel="nofollow" href="https://github.com/well2333"><i class="fa fa-github"></i></a></li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2022 Well404的妙妙屋 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by Well404.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="https://unpkg.com/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>


    <script async src="/js/candy.min.js"></script>




    <script defer src="https://unpkg.com/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="https://unpkg.com/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>


    <script defer src="/js/kr-dark.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>